<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.docmall.demo.mapper.ReplyMapper">

	<!-- 댓글 기능 구현 -->
	<select id="getListPaging" resultType="com.docmall.demo.domain.ReplyVO">
		<![CDATA[
			SELECT
			    rno,
			    bno,
			    retext,
			    replyer,
			    replydate,
			    updatedate
			FROM (
			    SELECT /*+ INDEX_DESC(board pk_reply) */
			        ROWNUM AS rn,
			            rno,
			            bno,
			            retext,
			            replyer,
			            replydate,
			            updatedate
			        FROM
			            reply
			        WHERE
			            bno = #{bno}
			        AND
						ROWNUM <= (#{cri.pageNum} * #{cri.amount})
			)
			WHERE
			    rn > (#{cri.pageNum} - 1 ) * #{cri.amount}
		]]>
	</select>
	
	<!-- 게시물의 전체 데이터수 가지고 오기 -->
	<select id="getCountByBno" resultType="int" parameterType="Long">
		SELECT
			COUNT(*)
		FROM
			reply
		WHERE
			bno = #{bno}
	</select>
	
	
	
	

</mapper>